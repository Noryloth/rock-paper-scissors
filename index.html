<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Rock Paper Scissors</h1>
    <div>Make a choice:</div>
    <br />
    <div>
      <button class="btn" id="btn-rock">Rock</button>
      <button class="btn" id="btn-paper">Paper</button>
      <button class="btn" id="btn-scissors">Scissors</button>
      <button class="btn" id="btn-reset">Reset</button>
    </div>
    <div id="results"></div>

    <script>
      // Query selectors
      const btnRock = document.querySelector("#btn-rock");
      const btnPaper = document.querySelector("#btn-paper");
      const btnScissors = document.querySelector("#btn-scissors");
      const btnReset = document.querySelector("#btn-reset");
      const showResults = document.querySelector("#results");
      const p = document.createElement("p");
      const h2 = document.createElement("h2");

      // Variables
      let userScore = 0;
      let computerScore = 0;

      // function getUserChoice() {
      //   let userChoice = prompt();
      //   console.log(userChoice);
      //   return userChoice;
      // }

      function getComputerChoice() {
        let computerChoice = Math.floor(Math.random() * 3) + 1;
        if (computerChoice === 1) {
          computerChoice = "R";
        } else if (computerChoice === 2) {
          computerChoice = "P";
        } else {
          computerChoice = "S";
        }
        return computerChoice;
      }

      // Play a game, count for scores
      function playRound(userSelection, computerSelection) {
        console.log("1 ", userSelection, "2 ", computerSelection);
        if (userSelection === computerSelection) {
          p.innerText = "Draw! Nobody wins.";
          showResults.appendChild(p);
        } else if (userSelection === "R" && computerSelection === "P") {
          computerScore++;
          p.innerText = "Computer wins! Paper folds the rock.";
          showResults.appendChild(p);
        } else if (userSelection === "R" && computerSelection === "S") {
          userScore++;
          p.innerText = "Player wins! Rock breaks the scissors.";
          showResults.appendChild(p);
        } else if (userSelection === "P" && computerSelection === "R") {
          userScore++;
          p.innerText = "Player wins! Paper folds the rock.";
          showResults.appendChild(p);
        } else if (userSelection === "P" && computerSelection === "S") {
          computerScore++;
          p.innerText = "Computer wins! Scissors cut the paper.";
          showResults.appendChild(p);
        } else if (userSelection === "S" && computerSelection === "R") {
          computerScore++;
          p.innerText = "Computer wins! Rock breaks the scissors.";
          showResults.appendChild(p);
        } else if (userSelection === "S" && computerSelection === "P") {
          userScore++;
          p.innerText = "Player wins! Scissors cut the paper.";
          showResults.appendChild(p);
        }

        if (userScore === 5 || computerScore === 5) {
          showWinner(userScore, computerScore);
        }
        // console.log("User's score:" + userScore);
        // console.log("Computer's score:" + computerScore);
      }

      // Rock, Paper, Scissors button events
      btnRock.addEventListener("click", () => {
        const computerSelection = getComputerChoice();
        const userSelection = "R";
        playRound(userSelection, computerSelection);
      });

      btnPaper.addEventListener("click", () => {
        const computerSelection = getComputerChoice();
        const userSelection = "P";
        playRound(userSelection, computerSelection);
      });

      btnScissors.addEventListener("click", () => {
        const computerSelection = getComputerChoice();
        const userSelection = "S";
        playRound(userSelection, computerSelection);
      });

      btnReset.addEventListener("click", () => {
        location.reload();
      })

      // Decide a winner, show scores
      function showWinner(userScore, computerScore) {
        if (userScore > computerScore) {
          h2.innerText = "Player wins the game!";
          showResults.append(h2);
        } else {
          h2.innerText = "Computer wins the game!";
          showResults.append(h2);
        }
        p.innerText = "User's score: " + userScore + "." + " Computer's score: " + computerScore + ".";
      }

      // function playGame() {
      //   for (i = 0; i < 3; i++) {
      //     const userSelection = getUserChoice();
      //     const computerSelection = getComputerChoice();
      //     playRound(userSelection, computerSelection);
      //   }
      // }

      // playGame();
    </script>
  </body>
</html>
